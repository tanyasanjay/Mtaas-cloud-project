<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		    <meta charset="utf-8">
		    <meta http-equiv="X-UA-Compatible" content="IE=edge">
		    <meta name="viewport" content="width=device-width, initial-scale=1">  
		    <meta name="description" content="">
		    <meta name="author" content="">
			<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
		    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"> 
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<style>
        
        html,
				body {
				  overflow-x: hidden; /* Prevent scroll on narrow devices */
				}
				body {
				  padding-top: 70px;
				}
				footer {
				  padding: 30px 0;
				}
				.rate-ex1-cnt{
	width:225px; height: 40px;
	margin:10px 0;
}
.rate-ex1-cnt .rate-btn,.rate-ex1-cnt .ratebtn{
	width: 37px; height:40px;
	float: left;
	background: url(http://blackblues.org/img/rate-btn.png) no-repeat;
	cursor: pointer;
}
.rate-ex1-cnt  .rate-btn-active{
	background: url(http://blackblues.org/img/rate-btn-hover.png) no-repeat;
}				
				@media screen and (max-width: 767px) {
				  .row-offcanvas {
				    position: relative;
				    -webkit-transition: all .25s ease-out;
				         -o-transition: all .25s ease-out;
				            transition: all .25s ease-out;
				  }				
				  .row-offcanvas-right {
				    right: 0;
                  }
                    .row-offcanvas-right {
		    right: 0;
		  }		
		  .row-offcanvas-left {
		    left: 0;
		  }		
		  .row-offcanvas-right
		  .sidebar-offcanvas {
		    right: -50%; /* 6 columns */
		  }		
		  .row-offcanvas-left
		  .sidebar-offcanvas {
		    left: -50%; /* 6 columns */
		  }		
		  .row-offcanvas-right.active {
		    right: 50%; /* 6 columns */
		  }		
		  .row-offcanvas-left.active {
		    left: 50%; /* 6 columns */
		  }		
		  .sidebar-offcanvas {
		    position: absolute;
		    top: 0;
		    width: 50%; /* 6 columns */
		  }
		}
         .logoutLblPos{		
		   position:fixed;
		   right:10px;
		   top:5px;
		}
        .body123{
    color:white;
}
        
        
        
    </style>
        
        </head>

 <body>
	<div ng-app="MtaaS" data-ng-controller="MtaaS1">
        
         <nav class="navbar navbar-fixed-top navbar-inverse">
	      <div class="container">
	        <div class="navbar-header">
	          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
	            <span class="sr-only">Toggle navigation</span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	          </button>
	          <a class="navbar-brand" href="#" ng-click = "home()">MTaas Crowdsourcing</a>
	        </div>
	        <div id="navbar" class="collapse navbar-collapse">
	          <ul class="nav navbar-nav">
	            <li><a href="#" ng-click="home()">Home</a></li>
	            <li><a href="#" ng-click="developerprofile()">Profile</a></li>
	            <li><a href="#" ng-click="developerproject()">My Projects</a></li>
	            <li class="active"><a href="#" ng-click="developerdashboard()">Dashboard</a></li>
	            <li><a href="#" ng-click="developerdefects()">Defects</a></li>
                  <li><a href="#" ng-click="billing()">Billing</a></li>
	          </ul>
	           <div class = "body123">
          
        
	          <label class="logoutLblPos"><h6><span id="time"></span>
	          <a type="submit" align="right" class="btn btn-success" ng-click="logoutsession()" role="button" >Logout</a>
	          </label> </h6></div>
	        </div><!-- /.nav-collapse -->
	      </div><!-- /.container -->
	    </nav><!-- /.navbar -->	
	    <div class="container">
            <div class="jumbotron">
          
			<div ng-repeat ="ctp in projectscount">
                <h2><font color="blue">Total Projects</h2>	
                    <h2> <b>{{ctp.projectdetails_id}} </font></b></h2>
    </div> <h2> Projects</h2>
		                            
		                                <table class="table table-striped table-bordered table-hover" id="dataTables-example">
		                                    <thead>
		                                        <tr>
		                                            <th><center>Project ID</center></th>
		                                            <th><center>Project Name</center></th>
		                                            <th><center>Project Description</center></th>
		                                            <th><center>Project Requirement</center></th>
		                                            <th><center>Plan</center></th>
		                                            
		                                        </tr>
		                                    </thead>
		                                    <tbody>
											<tr ng-repeat="p in myprojects| filter: search" class="even gradeC">
		                                            <td><center>{{p.projectdetails_id}}</center></td>
		                                            <td><center>{{p.projectname}}</center></td>		                                            
		                                            <td><center>{{p.description}}</center></td>
		                                            <td><center>{{p.requirement}}</center></td>
		                                            <td><center>{{p.plan}}</center></td>
		                                            
		                                    </tr>
		                                    </tbody>
		                                </table>
		                                 
                <div ng-repeat ="ctt in projectsdefect">
                <h2><font color="blue">Total Testers</h2>	
                    <h2> <b>{{ctt.testerid123}}</b></font></h2></div>
     <h2> Allocated Testers</h2>
    
		                                <table class="table table-striped table-bordered table-hover" id="dataTables-example">
		                                    <thead>
		                                        <tr>
		                                            <th><center>Tester ID</center></th>
		                                            <th><center>Tester Name</center></th>
		                                            
		                                            <th><center>Project Name</center></th>
		                                            
		                                        </tr>
		                                    </thead>
		                                    <tbody>
											<tr ng-repeat="a in assign| filter: search" class="even gradeC">
                                                <td><center>{{a.testerid123}}</center></td>
		                                            <td><center>{{a.testername123}}</center></td>		                                            
		                                            <td><center>{{a.projectname123}}</center></td>
		                                    </tr>
		                                    </tbody>
		                                </table>
                
                
                <div ng-repeat="dd in defectscountd">
                <h2><font color="blue">Total Defects</h2>	
                    <h2> <b>{{dd.defect_id}}</b> </font></h2></div>
                <h2>Defects/Tester</h2>
     
        
    
		                                <table class="table table-striped table-bordered table-hover" id="dataTables-example">
		                                    <thead>
		                                        <tr>
		                                            <th><center>Tester Name</center></th>
		                                            <th><center>Number of Defects</center></th>
		                                            
		                                        </tr>
		                                    </thead>
		                                    <tbody>
											<tr ng-repeat="rate in rates| filter: search" class="even gradeC">
		                                            <td><center>{{rate.defect_tester}}</center></td>
		                                            <td><center>{{rate.defect_id}}</center></td>	
		                                    </tr>
		                                    </tbody>
		                                </table>
                
                 <h2>Defects/Projects</h2>
		                            
		                                <table class="table table-striped table-bordered table-hover" id="dataTables-example">
		                                    <thead>
		                                        <tr>
		                                            <th><center>Project Name</center></th>
		                                            <th><center>Number of Defects</center></th>
		                                            
		                                            
		                                        </tr>
		                                    </thead>
		                                    <tbody>
											<tr ng-repeat="aa in assign123| filter: search" class="even gradeC">
		                                            <td><center>{{aa.defectprojectname}}</center></td>
		                                            <td><center>{{aa.defect_id}}</center></td>		                                            
		                                            
		                                            
		                                    </tr>
		                                    </tbody>
		                                </table>
		                            
                
		                            
                
		         		    
        
        
        
        
        
        
        
        
                    
	                            
                                    <h2> <font color="blue">Rate Testers</font></h2><a href = "#" ng-click = "incentives()"> <h4 style = "color:                                        black"><u>Incentives</u></h4></a> 
                                    Tester Name <input type="text" name="tname" ng-model="tname"> 
                                                    <div class="rate-ex1-cnt">
            <div id="1" class="rate-btn-1 rate-btn"></div>
            <div id="2" class="rate-btn-2 rate-btn"></div>
            <div id="3" class="rate-btn-3 rate-btn"></div>
            <div id="4" class="rate-btn-4 rate-btn"></div>
            <div id="5" class="rate-btn-5 rate-btn"></div>
        </div>
                                    <input type="text" id="rating" hidden>
	                                <button type="button" class="btn btn-primary btn-lg" ng-click = "rate()">Rate Tester</button>
	                            </div>                      
	          				</div>
                    
                    
                    
       
 
 <script>
	   var app=angular.module('MtaaS', []);
	 	app.controller('MtaaS1', ['$scope', '$http', '$window', function ( $scope,$http,$window)
	 		{
                
                
                $http({
			 method: 'GET',
			 url: '/checklogin'
			 }).
			 then(function(response)
			 {
			 	if(response.data.status===300)
			 	{
			 	$window.location.href='/';
			 	}
			 });
		$scope.logoutsession= function () 
			{
				 $http({
				 method: 'GET',
				 url: '/logoutsession'
				 }).
				then(function(response)
				 {
				 	if(response.data.status===300)
				 	{
				 	console.log("destroy session");
				 	}else
				 	{
				 	$window.location.href='/';
				 	}
				 });
			 } 
                
                $scope.developerdashboarddefect = function() {
	   		    	$http({
	   		            method: 'GET',
	   		            url: '/developerdashboarddefect',
	   		            }).success(function(response){
	   		           		//alert(JSON.stringify(response));
	   		           		$scope.defectscountd= JSON.parse(response.result);
	   		        }).error(function(error){
	   		            alert("ERROR VIEWING PENDING CUSTOMER REQUEST");
	   		        });
	   		    }; 
	   		 $scope.developerdashboarddefect();
               
               
               
               
               
               $scope.countprojectsprofiled = function() {
     		    	$http({
	   		            method: 'GET',
	   		            url: '/countprojectsprofiled',
	   		            }).success(function(response){
	   		           		//alert(JSON.stringify(response));
	   		           		$scope.projectscount= JSON.parse(response.result);
	   		        }).error(function(error){
	   		            alert("ERROR VIEWING PENDING CUSTOMER REQUEST");
	   		        });
	   		    }; 
	   		 $scope.countprojectsprofiled();
         
         $scope.countprojectsdefect = function() {
     		    	$http({
	   		            method: 'GET',
	   		            url: '/countprojectsdefect',
	   		            }).success(function(response){
	   		           		//alert(JSON.stringify(response));
	   		           		$scope.projectsdefect= JSON.parse(response.result);
	   		        }).error(function(error){
	   		            alert("ERROR VIEWING PENDING CUSTOMER REQUEST");
	   		        });
	   		    }; 
	   		 $scope.countprojectsdefect();
         
         $scope.individualtesterdefect = function() {
     		    	$http({
	   		            method: 'GET',
	   		            url: '/individualtesterdefect',
	   		            }).success(function(response){
	   		           		//alert(JSON.stringify(response));
	   		           		$scope.rates= JSON.parse(response.result);
	   		        }).error(function(error){
	   		            alert("ERROR VIEWING PENDING CUSTOMER REQUEST");
	   		        });
	   		    }; 
	   		 $scope.individualtesterdefect();
                
                
                
                
                
                
                
	 		$scope.rate = function (){
				var in_tname = $scope.tname;
				//var in_rated = $scope.rating;
				   alert(therate );
				
				alert(in_tname );
				
				
					if (in_tname == null || in_tname == "")
					{
						alert("tester-name cannot be empty!!");
						return;
					}
				
				 $http({
                  method: 'POST',
                  url: '/rate',
                  data: {"tname":in_tname,"rated":therate}
                  }).then(function(response) {
				  $window.location.href = '/developerdashboard';
			  });
			};          
                
            
                
                 $http({
			      	  method: 'GET',
			      	  url: '/developermyprojects'
						}).
			          then(function(response) {
			         //alert(response.data.result);
			         $scope.myprojects = angular.fromJson(response.data.result);
			          });
         
         $http({
			      	  method: 'GET',
			      	  url: '/developertesters'
						}).
			          then(function(response) {
			         //alert(response.data.result);
			         $scope.assign = angular.fromJson(response.data.result);
			          });
         $http({
			      	  method: 'GET',
			      	  url: '/defectsperprojects'
						}).
			          then(function(response) {
			         //alert(response.data.result);
			         $scope.assign123 = angular.fromJson(response.data.result);
			          });
         
         
         
 			
               	 $scope.home = function (){
			   $window.location.href = '/home';
			}
               $scope.developerprofile = function (){
			   $window.location.href = '/developerprofile';
			}
			$scope.developerproject = function (){
			   $window.location.href = '/developerproject';
			}
			$scope.developerdashboard = function (){
			   $window.location.href = '/developerdashboard';
 			}
			  $scope.developerhome = function (){
			   $window.location.href = '/developerhome';
			}
			$scope.developerdefects = function (){
						   $window.location.href = '/developerdefects';
						}
            $scope.billing = function (){
						   $window.location.href = '/billing';
						}
            $scope.incentives = function (){
						   $window.location.href = '/incentives';
						}
            }]);
     
        </script>
                     <script>
        // rating script
                      var therate=0;             
       
        $(function(){ 
            $('.rate-btn').click(function(){    
                 therate = $(this).attr('id');
               $('#rating').val(therate);
                 $(this).parent().find('.rate-btn').removeClass('rate-btn-active');
                for (var i = therate; i >= 0; i--) {
                    $(this).parent().find('.rate-btn-'+i).addClass('rate-btn-active');
                };
                            });
        });
    </script>
                <script>
    var today = new Date();
document.getElementById('time').innerHTML=today;
    </script>
                    </body>
                    </html>
